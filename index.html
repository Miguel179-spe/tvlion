<!DOCTYPE html> 
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Series+ - Plataforma de Streaming</title>
<style>
:root {
    --primary-color: #7b2dff;
    --background-dark: #000;
    --background-card: #111;
    --background-secondary: #222;
    --text-light: #fff;
    --accent-red: #e50914;
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body {
    font-family: 'Segoe UI', Arial, sans-serif;
    background: var(--background-dark);
    color: var(--text-light);
    overflow-x: hidden;
}

/* HEADER */
header {
    padding: 15px;
    background: rgba(0,0,0,0.8);
    position: sticky;
    top: 0;
    display: flex;
    gap: 15px;
    align-items: center;
    z-index: 10;
}

.logo { font-weight: bold; font-size: 1.5rem; color: var(--primary-color); }

header input {
    flex: 1;
    padding: 12px 15px;
    border-radius: 8px;
    border: none;
    background: var(--background-secondary);
    color: var(--text-light);
    font-size: 1rem;
}

/* CARDS */
.grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    gap: 15px;
    padding: 20px;
}

.card {
    background: var(--background-card);
    border-radius: 10px;
    overflow: hidden;
    cursor: pointer;
    transition: transform 0.3s ease, outline 0.3s ease;
    position: relative;
}

.card img { width: 100%; height: 200px; object-fit: cover; }
.card-title { padding: 12px; font-size: 0.9rem; font-weight: 500; }

.card.focused {
    outline: 3px solid var(--primary-color);
    transform: scale(1.06);
}

/* BADGES */
.badge {
    position: absolute;
    top: 8px;
    left: 8px;
    background: var(--accent-red);
    padding: 4px 10px;
    font-size: 0.7rem;
    border-radius: 5px;
    font-weight: bold;
}
.badge.doblado { background: #5a42f5; }

/* MODAL */
.modal {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.95);
    justify-content: center;
    align-items: center;
    flex-direction: column;
    z-index: 200;
    padding: 20px;
}

.modal .episodios-grid {
    margin-top: 15px;
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    justify-content: center;
}

.modal .episodio {
    background: var(--background-secondary);
    padding: 8px 12px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.9rem;
    color: var(--text-light);
    transition: 0.2s;
}

.modal .episodio.focused {
    outline: 2px solid var(--primary-color);
    transform: scale(1.12);
}

.modal .episodio.activo { background: var(--primary-color); }
.modal .episodio.bloqueado { opacity: 0.4; cursor: not-allowed; }

.close {
    position: absolute;
    top: 15px;
    right: 20px;
    font-size: 2rem;
    cursor: pointer;
}

/* BOTÓN ATRÁS */
.back-button {
    position: absolute;
    top: 15px;
    left: 20px;
    background: var(--background-secondary);
    color: var(--text-light);
    border: none;
    padding: 8px 15px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 1rem;
    display: none;
    z-index: 201;
}

.back-button.visible {
    display: block;
}
</style>
</head>
<body>

<header>
    <div class="logo">SERIES</div>
   
</header>

<button class="back-button" id="backButton">← Atrás</button>

<section class="grid" id="mainGrid">
    <article class="card" data-series="Shantaram">
        <span class="badge">Nuevo</span>
        <img src="https://www.themoviedb.org/t/p/w1280/6FZCmmAdszkEFLAoibEuJPDhW40.jpg">
        <div class="card-title">Shantaram</div>
    </article>

    <article class="card" data-series="Professor T">
        <span class="badge">Nuevo</span>
        <img src="https://www.themoviedb.org/t/p/w1280/jJ9SjrX7tEAwHigRq20TeANhH1Q.jpg">
        <div class="card-title">Professor T</div>
    </article>








    

    <article class="card" data-series="Yes Minister">
        <span class="badge doblado">Doblado</span>
        <img src="https://www.themoviedb.org/t/p/w1280/h5kF0rJaCWuF3nMBTT6IeRU8j2D.jpg">
        <div class="card-title">Yes Minister</div>
    </article>

    <article class="card" data-series="ciencia-ficcion">
        <img src="https://www.themoviedb.org/t/p/w1280/m1jFoahEbeQXtx4zArT2FKdbNIj.jpg">
        <div class="card-title">Ciencia Ficción</div>
    </article>

    <article class="card" data-series="misterios-nocturnos">
        <span class="badge">Nuevo</span>
        <img src="https://www.themoviedb.org/t/p/w1280/kGLgaDrYWmTAdRFzGP5pBquRnhO.jpg">
        <div class="card-title">Misterios Nocturnos</div>
    </article>
</section>

<!-- MODAL -->
<div class="modal" id="modal">
    <span class="close" onclick="closeModal()">&times;</span>
    <h2>Episodios</h2>
    <div class="episodios-grid" id="episodios"></div>
</div>

<script>
/* ------- SERIES DATA ------- */
const seriesData = {
    "Shantaram": [
        { title: "Episodio 1", url: "http://fortv.cc:8080/series/16686894/06987237/168781.mp4" },
        { title: "Episodio 2", url: "http://fortv.cc:8080/series/16686894/06987237/168782.mp4" },
        { title: "Episodio 3", url: "http://fortv.cc:8080/series/16686894/06987237/168783.mp4"},
        { title: "Episodio 4", url: "http://fortv.cc:8080/series/16686894/06987237/168784.mp4"},
        { title: "Episodio 5", url: "http://fortv.cc:8080/series/16686894/06987237/171584.mp4"},
        { title: "Episodio 6", url: "http://fortv.cc:8080/series/16686894/06987237/171585.mp4"},
        { title: "Episodio 7", url: "http://fortv.cc:8080/series/16686894/06987237/172057.mp4"},
        { title: "Episodio 8", url: "http://fortv.cc:8080/series/16686894/06987237/173525.mp4"},
        { title: "Episodio 9", url: "http://fortv.cc:8080/series/16686894/06987237/173526.mp4"},
        { title: "Episodio 10", url: "http://fortv.cc:8080/series/16686894/06987237/173527.mp4"},
        { title: "Episodio 11", url: "http://fortv.cc:8080/series/16686894/06987237/173528.mp4"},
        { title: "Episodio 12", url: "http://fortv.cc:8080/series/16686894/06987237/174184.mp4"},
        { title: "Episodio 13", url: "http://fortv.cc:8080/series/16686894/06987237/174361.mp4"}
    ],

"Professor T": [
    { title: "T01 E01", url: "http://fortv.cc:8080/series/16686894/06987237/168785.mp4" },
    { title: "T01 E02", url: "http://fortv.cc:8080/series/16686894/06987237/168786.mp4" },
    { title: "T01 E03", url: "http://fortv.cc:8080/series/16686894/06987237/168787.mp4" },
    { title: "T01 E04", url: "http://fortv.cc:8080/series/16686894/06987237/168788.mp4" },
    { title: "T01 E05", url: "http://fortv.cc:8080/series/16686894/06987237/168789.mp4" },
    { title: "T01 E06", url: "http://fortv.cc:8080/series/16686894/06987237/168790.mp4" },

    { title: "T02 E01", url: "http://fortv.cc:8080/series/16686894/06987237/168791.mp4" },
    { title: "T02 E02", url: "http://fortv.cc:8080/series/16686894/06987237/168792.mp4" },
    { title: "T02 E03", url: "http://fortv.cc:8080/series/16686894/06987237/168793.mp4" },
    { title: "T02 E04", url: "http://fortv.cc:8080/series/16686894/06987237/168794.mp4" },
    { title: "T02 E05", url: "http://fortv.cc:8080/series/16686894/06987237/168795.mp4" },
    { title: "T02 E06", url: "http://fortv.cc:8080/series/16686894/06987237/171509.mp4" }
	],




    
    "Yes Minister": [
        { title: "Capítulo 1", url: "https://archive.org/download/el-abismo-secreto_202511/El%20abismo%20secreto.mp4" },
        { title: "Capítulo 2", url: "https://archive.org/download/sample-mp4-file_202511/sample.mp4" },
        { title: "Capítulo 3", url: "", locked: true }
    ],

    "ciencia-ficcion": [
        { title: "Episodio 1", url: "https://archive.org/download/sample-mp4-file_202511/sample.mp4" },
        { title: "Episodio 2", url: "https://archive.org/download/sample-mp4-file_202511/sample.mp4" }
    ],

    "misterios-nocturnos": [
        { title: "Episodio 1", url: "https://archive.org/download/sample-mp4-file_202511/sample.mp4" }
    ]
};

/* ------- TV NAVIGATION HOME ------- */
const cards = [...document.querySelectorAll(".card")];
let index = 0;
const backButton = document.getElementById("backButton");
const mainGrid = document.getElementById("mainGrid");

function focusCard() {
    cards.forEach(c => c.classList.remove("focused"));
    cards[index].classList.add("focused");
    cards[index].scrollIntoView({ behavior: "smooth", block: "nearest", inline: "center" });
}
focusCard();

const modal = document.getElementById("modal");
const episodiosDiv = document.getElementById("episodios");
let currentSeries = null;
let episodioEls = [];
let epIndex = 0;
let lastBackspaceTime = 0;

/* ------- OPEN MODAL ------- */
cards.forEach(card => {
    card.addEventListener("click", () => {
        currentSeries = card.dataset.series;
        openModal();
    });
});

function openModal() {
    modal.style.display = "flex";
    backButton.classList.add("visible");
    loadEpisodes();
}

/* ------- LOAD EPISODES ------- */
function loadEpisodes() {
    episodiosDiv.innerHTML = "";
    episodioEls = [];

    seriesData[currentSeries].forEach((ep, i) => {
        const div = document.createElement("div");
        div.textContent = ep.title;
        div.classList.add("episodio");
        if (ep.locked) div.classList.add("bloqueado");

        div.addEventListener("click", () => playEpisode(i));

        episodiosDiv.append(div);
        episodioEls.push(div);
    });

    focusEpisode(0);
}

/* ------- PLAY EPISODE ------- */
function playEpisode(i) {
    const ep = seriesData[currentSeries][i];
    if (ep.locked) return alert("Episodio bloqueado");
    window.location.href = ep.url;
}

/* ------- NAVIGATION EPISODES & DOUBLE BACKSPACE ------- */
function focusEpisode(i) {
    epIndex = i;
    episodioEls.forEach(e => e.classList.remove("focused"));
    episodioEls[i].classList.add("focused");
}

/* ------- CLOSE MODAL ------- */
function closeModal() {
    modal.style.display = "none";
    backButton.classList.remove("visible");
    // Restablecer el foco a la tarjeta de la serie actual
    const currentCardIndex = cards.findIndex(card => card.dataset.series === currentSeries);
    if (currentCardIndex !== -1) {
        index = currentCardIndex;
        focusCard();
    }
}

/* ------- MANEJAR BOTÓN ATRÁS ------- */
backButton.addEventListener("click", closeModal);

document.addEventListener("keydown", e => {
    const now = Date.now();

    // Si el modal está abierto
    if (modal.style.display === "flex") {
        if (e.key === "ArrowRight") {
            epIndex = Math.min(epIndex + 1, episodioEls.length - 1);
            focusEpisode(epIndex);
        }
        if (e.key === "ArrowLeft") {
            epIndex = Math.max(epIndex - 1, 0);
            focusEpisode(epIndex);
        }
        if (e.key === "Enter") episodioEls[epIndex].click();

        // Botón Atrás (Backspace) para volver al inicio
        if (e.key === "Backspace") {
            closeModal();
        }
        return;
    }

    // Navegación en Home
    const gridWidth = Math.floor(document.querySelector(".grid").offsetWidth / cards[0].offsetWidth);
    if (e.key === "ArrowRight") index = (index + 1) % cards.length;
    if (e.key === "ArrowLeft") index = (index - 1 + cards.length) % cards.length;
    if (e.key === "ArrowDown") index = Math.min(index + gridWidth, cards.length - 1);
    if (e.key === "ArrowUp") index = Math.max(index - gridWidth, 0);
    if (e.key === "Enter") cards[index].click();
    focusCard();
});

// Manejar el botón "atrás" del navegador
window.addEventListener('popstate', function(event) {
    if (modal.style.display === "flex") {
        closeModal();
        // Prevenir que el navegador retroceda en el historial
        history.pushState(null, null, window.location.href);
    }
});

// Prevenir que el navegador retroceda cuando se abre el modal
window.history.pushState(null, null, window.location.href);
</script>

</body>
</html>






